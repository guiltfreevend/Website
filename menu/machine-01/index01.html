    <!DOCTYPE html>
    <html lang="bg">
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <meta name="robots" content="noindex, nofollow">
            <meta name="theme-color" content="#f4efe6">
            <title>Меню – GuiltFreeVend</title>

            <!-- Google tag (gtag.js) – GuiltFreeVend -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-H6X0Z7FYFD"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-H6X0Z7FYFD', { anonymize_ip: true, transport_type: 'beacon' });
            </script>

            <script>
                // Изпраща събитие "qr_view" САМО ако посещението идва от QR (utm_source=qr).
                // machine се чете от utm_content; ако липсва – вади "machine-01" от URL пътя.
                (function () {
                    try {
                        const p = new URLSearchParams(location.search);
                        const src = (p.get('utm_source') || '').toLowerCase();
                        // извлечи machine-XX от /menu/machine-01/...
                        const mFromPath = (location.pathname.match(/machine-([A-Za-z0-9_-]+)/) || [])[1];
                        const machine = (p.get('utm_content') || (mFromPath ? `machine-${mFromPath}` : 'unknown')).toLowerCase();
        
                        if (src === 'qr' && typeof gtag === 'function') {
                            gtag('event', 'qr_view', { machine });
                        }
                        // За тестове можеш временно да форсираш изпращане (махни коментара):
                        // if (typeof gtag === 'function') { gtag('event', 'qr_view', { machine, debug: 'forced' }); }
                    } catch (e) {}
                })();
            </script>

            
            <style>
                :root{
                    --beige:#f4efe6;     /* фон */
                    --brand:#3c5c2c;     /* тъмно зелено от логото */
                    --ink:#0c1f17;
                    --muted:#6c7a73;
                }
                *{box-sizing:border-box}
                html,body{margin:0;padding:0}
                body{
                    background:var(--beige);
                    color:var(--ink);
                    font-family:system-ui,-apple-system,"Segoe UI",Inter,Roboto,Arial,sans-serif;
                }

                /* Header */
                .header{
                    display:flex; align-items:center; justify-content:center;
                    /* преди беше padding:20px 16px 10px; */
                    padding: 6px 16px 2px;                           /* по-малко място над/под */
                    padding-top: calc(env(safe-area-inset-top, 0px) + 4px); /* уважава iOS notch */
                }
                .logo{
                    height:108px; width:auto; display:block;  /* ⇐ по-голямо лого */
                }
                @media (min-width:768px){
                    .logo{ height:150px; }                    /* леко по-голямо на десктоп */
                }

                /* Stage (една снимка) */
                .stage{
                    max-width:1100px; margin:0 auto; padding:2px 16px 18px;  
                    position:relative;
                }
                .slide{
                    display:block; margin:0 auto; width:100%; height:auto;
                    background:transparent; box-shadow:none; user-select:none; -webkit-user-drag:none;
                    cursor:zoom-in;
                }

                /* Навигация със стрелки */
                .nav{
                    position:absolute; inset:0; display:flex; align-items:center; justify-content:space-between;
                    pointer-events:none;
                }
                .nav button{
                    pointer-events:auto;
                    border:none; border-radius:14px; cursor:pointer;
                    padding:14px 16px; font-size:22px; line-height:1; font-weight:800;
                    background:rgba(255,255,255,.75);
                    backdrop-filter:saturate(140%) blur(6px);
                    color:var(--brand);
                }
                .nav .prev{margin-left:6px}
                .nav .next{margin-right:6px}
                .counter{
                    position:absolute; bottom:6px; right:10px;
                    background:rgba(255,255,255,.7);
                    padding:6px 10px; border-radius:10px; font-weight:700; font-size:12px; color:var(--brand);
                }

                /* Footer */
                footer{padding:22px 16px 36px}
                .foot{
                    max-width:1100px; margin:0 auto; border-top:1px dashed rgba(0,0,0,.08);
                    padding-top:16px; display:flex; align-items:center; justify-content:space-between; gap:14px; flex-wrap:wrap;
                }
                .btn{
                    background:var(--brand); color:#fff; text-decoration:none; font-weight:800;
                    padding:12px 18px; border-radius:14px;
                    box-shadow:0 4px 14px rgba(11,93,74,.15);
                }

                .social{display:flex; gap:12px}
                /* кръгчетата вече са тъмно зелени */
                .social a{
                    display:inline-flex; width:40px; height:40px; align-items:center; justify-content:center; border-radius:50%;
                    background:#fff;
                    border:1px solid rgba(60,92,44,.22);
                    box-shadow:0 4px 12px rgba(60,92,44,.08);
                }

                /* оцветяване на SVG-иконите в #3c5c2c (работи за черни/тъмни SVG-и) */
                .social img{
                    width:20px; height:20px; display:block;
                    filter: brightness(0) saturate(100%) invert(32%) sepia(18%) saturate(902%) hue-rotate(58deg) brightness(92%) contrast(90%);
                }

                /* Лайтбокс (zoom) */
                .lightbox{position:fixed; inset:0; background:rgba(0,0,0,.96); display:none; align-items:center; justify-content:center; z-index:40}
                .lightbox.open{display:flex}
                .lightbox img{max-width:96vw; max-height:96vh}

                /* === По-малки (по-тесни) изображения на десктоп и при landscape === */
                
                /* Десктопи и големи екрани */
                @media (min-width: 1024px) {
                    .slide{
                        width: min(56vw, 820px);   /* по-тясно от преди (55–60% от екрана, макс 820px) */
                        max-height: 84vh;
                    }
                }
                
                /* Телефони/таблети в хоризонтален (landscape) режим */
                @media (orientation: landscape) and (max-width: 1023px) {
                    .slide{
                        width: min(84vw, 700px);   /* по-тясно и в landscape */
                        max-height: 82vh;
                    }
                }

            </style>
        </head>
        <body>
            <!-- Лого по средата -->
            <header class="header">
                <img class="logo" src="/logotransperant.svg" alt="GuiltFreeVend"
                     onerror="this.onerror=null;this.src='/logotransparent.svg'">
            </header>

            <!-- Сцена: показваме точно една снимка; сменяме с ←/→ -->
            <main class="stage">
                <img id="slide" class="slide" src="" alt="Каталог – изображение">

                <div class="nav" aria-hidden="false">
                    <button id="prev" class="prev" aria-label="Предишно">‹</button>
                    <button id="next" class="next" aria-label="Следващо">›</button>
                    <div id="counter" class="counter">1 / 7</div>
                </div>
            </main>

            <!-- Лайтбокс за пълен размер -->
            <div id="lightbox" class="lightbox" aria-hidden="true">
                <img id="lbimg" alt="Преглед">
            </div>

            <!-- Футър: бутон + социалки в тъмно зелено -->
            <footer>
                <div class="foot">
                    <a class="btn" href="https://guiltfreevend.com" target="_self" rel="noopener">Към сайта</a>
                    <nav class="social" aria-label="Социални мрежи">
                        <a href="https://instagram.com/guiltfreevend" target="_blank" rel="noopener" aria-label="Instagram">
                            <img src="/icon_instagram.svg" alt="Instagram">
                        </a>
                        <a href="https://facebook.com/guiltfreevend" target="_blank" rel="noopener" aria-label="Facebook">
                            <img src="/icon_facebook.svg" alt="Facebook">
                        </a>
                        <a href="https://www.linkedin.com/company/guiltfreevend" target="_blank" rel="noopener" aria-label="LinkedIn">
                            <img src="/linkedin.svg" alt="LinkedIn">
                        </a>
                        <a href="/#contact" target="_self" rel="noopener" aria-label="Контакт">
                            <img src="/mail.svg" alt="E-mail">
                        </a>
                    </nav>
                </div>
            </footer>

            <script>
                // Редът на изображенията
                const order = [1, 6, 4, 3, 2, 7, 5];
                const sources = order.map(n => `/cataloguepic${n}.webp`);

                const img = document.getElementById('slide');
                const prev = document.getElementById('prev');
                const next = document.getElementById('next');
                const counter = document.getElementById('counter');
                const lb = document.getElementById('lightbox');
                const lbimg = document.getElementById('lbimg');

                let i = 0;

                function show(k){
                    i = (k + sources.length) % sources.length;
                    img.src = sources[i];
                    img.alt = `Каталог – изображение ${i+1}`;
                    counter.textContent = `${i+1} / ${sources.length}`;
                    // preload съседни
                    new Image().src = sources[(i+1) % sources.length];
                    new Image().src = sources[(i-1+sources.length) % sources.length];
                }

                // Стрелки
                prev.addEventListener('click', () => show(i-1));
                next.addEventListener('click', () => show(i+1));

                // Клавиатура
                window.addEventListener('keydown', (e)=>{
                    if(lb.classList.contains('open')){
                        if(e.key === 'Escape') closeLb();
                        if(e.key === 'ArrowLeft') show(i-1), syncLb();
                        if(e.key === 'ArrowRight') show(i+1), syncLb();
                    }else{
                        if(e.key === 'ArrowLeft') show(i-1);
                        if(e.key === 'ArrowRight') show(i+1);
                    }
                });
                
                // --- Забраняваме смяна със swipe/тап върху изображението ---
                // (Запазваме само отварянето на лайтбокса при натискане.)
                let sx = 0;
                img.addEventListener('touchstart', (e)=>{ /* disabled swipe */ }, {passive:true});
                img.addEventListener('touchend',   (e)=>{ /* disabled swipe */ }, {passive:true});
        
                // Уверяваме се, че клик върху снимката само отваря zoom (не сменя кадъра)
                img.addEventListener('click', (e)=>{ e.preventDefault(); openLb(); });

                // Старт
                show(0);
            </script>
        </body>
    </html>    

